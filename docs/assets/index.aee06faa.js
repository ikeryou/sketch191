var P=Object.defineProperty;var I=(l,e,t)=>e in l?P(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var n=(l,e,t)=>(I(l,typeof e!="symbol"?e+"":e,t),t);import{d as _,W as M,S as H,O as R,V as E,a as T,G as D,C as L,b as G,P as F,R as q,B as N,c as O}from"./vendor.a277b163.js";const W=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};W();var B=`precision highp float;

uniform mat4 modelMatrix;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform vec3 cameraPosition;

uniform float size;
uniform float time;
uniform float ang;

uniform vec3 color;

attribute vec3 position;
attribute vec3 info;

varying vec3 vColor;

float map(float value, float beforeMin, float beforeMax, float afterMin, float afterMax) {
  return afterMin + (afterMax - afterMin) * ((value - beforeMin) / (beforeMax - beforeMin));
}

vec3 rotate(vec3 p, float angle, vec3 axis){
    vec3 a = normalize(axis);
    float s = sin(angle);
    float c = cos(angle);
    float r = 1.0 - c;
    mat3 m = mat3(
        a.x * a.x * r + c,
        a.y * a.x * r + a.z * s,
        a.z * a.x * r - a.y * s,
        a.x * a.y * r - a.z * s,
        a.y * a.y * r + c,
        a.z * a.y * r + a.x * s,
        a.x * a.z * r + a.y * s,
        a.y * a.z * r - a.x * s,
        a.z * a.z * r + c
    );
    return m * p;
}

void main(){
  vColor = color;

  vec3 p = position;

  p = rotate(p, ang * info.x * 0.001, vec3(0.0, 0.0, 1.0));

  vec4 mvPosition = modelViewMatrix * vec4(p, 1.0);

  gl_Position = projectionMatrix * mvPosition;
  gl_PointSize = size;
}`,U=`precision highp float;

varying vec3 vColor;

void main(void) {
  gl_FragColor = vec4(vColor, 1.0);
}`;class d{constructor(){}}n(d,"LG",0),n(d,"XS",1);const w=class{constructor(){}static get instance(){return this._instance||(this._instance=new w),this._instance}random(e,t){return Math.random()*(t-e)+e}random2(e,t){let i=Math.random()*(t-e)+e;return this.hit(2)&&(i*=-1),i}randomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}hit(e=0){return e<2&&(e=2),this.randomInt(0,e-1)==0}randomArr(e){return e[this.randomInt(0,e.length-1)]}range(e){return this.random(-e,e)}clamp(e,t,i){return Math.min(i,Math.max(e,t))}map(e,t,i,s,r){if(e<=s)return t;if(e>=r)return i;const a=(i-t)/(r-s);return(e-s)*a+t}mix(e,t,i){return e*(1-i)+t*i}radian(e){return e*Math.PI/180}degree(e){return e*180/Math.PI}shuffle(e){let t=e.length;for(;--t;){let i=Math.floor(Math.random()*(t+1));if(t==i)continue;let s=e[t];e[t]=e[i],e[i]=s}}replaceAll(e,t,i){return e.split(t).join(i)}sort(e,t,i=!0){i?e.sort((s,r)=>r[t]-s[t]):e.sort((s,r)=>s[t]-r[t])}distance(e,t,i,s){const r=e-i,a=t-s;return Math.sqrt(r*r+a*a)}numStr(e,t){let i=String(e);if(i.length>=t)return i;const s=t-i.length;let r=0;for(;r<s;)i="0"+i,r++;return i}isIE(){const e=window.navigator.userAgent.toLowerCase();return e.indexOf("msie")!=-1||e.indexOf("trident/7")!=-1||e.indexOf("edge")!=-1}isIE2(){const e=window.navigator.userAgent.toLowerCase();return e.indexOf("msie")!=-1||e.indexOf("trident/7")!=-1}isWin(){return window.navigator.platform.indexOf("Win")!=-1}isChrome(){return window.navigator.userAgent.toLowerCase().indexOf("chrome")!=-1}isFF(){return window.navigator.userAgent.toLowerCase().indexOf("firefox")!=-1}isSafari(){return window.navigator.userAgent.toLowerCase().indexOf("safari")!=-1&&!this.isChrome()}useWebGL(){try{const e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return!!(window.WebGLRenderingContext&&t&&t.getShaderPrecisionFormat)}catch{return!1}}getQuery(e){e=e.replace(/[€[]/,"\u20AC\u20AC\u20AC[").replace(/[€]]/,"\u20AC\u20AC\u20AC]");const i=new RegExp("[\u20AC\u20AC?&]"+e+"=([^&//]*)").exec(window.location.href);return i==null?"":i[1]}isTouchDevice(){return"ontouchstart"in window||navigator!=null&&navigator.maxTouchPoints>0}isPc(){return _.mobile()==!1}isSp(){return _.mobile()}isAod(){return _.android()}isIPhone(){return _.iphone()}isIPad(){return _.tablet()}};let o=w;n(o,"_instance");const S=class{constructor(){n(this,"FLG_PARAM",location.href.includes("p=yes"));n(this,"FLG_STATS",location.href.includes("p=yes"));n(this,"FLG_TEST",location.href.includes("10.0.1.33")||location.href.includes("localhost"));n(this,"PATH_IMG","./assets/img/");n(this,"USE_TOUCH",o.instance.isTouchDevice());n(this,"BREAKPOINT",768);n(this,"LG_PSD_WIDTH",1600);n(this,"XS_PSD_WIDTH",750);n(this,"IS_SIMPLE",o.instance.isPc()&&o.instance.isSafari());n(this,"IS_PC",o.instance.isPc());n(this,"IS_SP",o.instance.isSp());n(this,"IS_AND",o.instance.isAod());n(this,"IS_TAB",o.instance.isIPad());n(this,"USE_ROLLOVER",o.instance.isPc()&&!o.instance.isIPad())}static get instance(){return this._instance||(this._instance=new S),this._instance}};let c=S;n(c,"_instance");const x=class{constructor(){n(this,"_useFullScreen",o.instance.isSp()||o.instance.isIPad())}static get instance(){return this._instance||(this._instance=new x),this._instance}ratio(){return window.devicePixelRatio||1}px(e){return e+"px"}useScreen(){return screen!=null}sw(){return window.innerWidth}sh(){return this._useFullScreen?screen.height:window.innerHeight}screenOffsetY(){return(window.innerHeight-this.sh())*.5}screen(){return window.innerWidth<=c.instance.BREAKPOINT?d.XS:d.LG}isXS(){return this.screen()==d.XS}isLG(){return this.screen()==d.LG}val(e,t){return this.isXS()?e:t}r(e){const t=this.val(c.instance.XS_PSD_WIDTH,c.instance.LG_PSD_WIDTH);return e/t*this.sw()}sin1(e){return Math.sin(e)+Math.sin(2*e)}sin2(e){return(Math.sin(e)+Math.sin(2.2*e+5.52)+Math.sin(2.9*e+.93)+Math.sin(4.6*e+8.94))/4}};let u=x;n(u,"_instance");class V{constructor(e={}){n(this,"opt");n(this,"el");this.opt=e,this.el=this.opt.el}init(){}dispose(){this.opt=null,this.el=null}getEl(){return this.el}hasData(e){return this.getEl().getAttribute(e)!=null}getData(e,t){const i=this.getEl().getAttribute(e);return i==null?t:i}qs(e){return this.el.querySelector(e)}qsAll(e){return this.el.querySelectorAll(e)}hasClass(e){return this.el.classList.contains(e)}addClass(e){this.el.classList.add(e)}attachClass(e,t){e!=null&&e.classList.add(t)}detachClass(e,t){e!=null&&e.classList.remove(t)}removeClass(e){this.el.classList.remove(e)}getWidth(e){var i;let t=(i=document.defaultView)==null?void 0:i.getComputedStyle(e,null).width;return Number(t==null?void 0:t.replace("px",""))}getHeight(e){var t;if(e==null)return 0;{let i=(t=document.defaultView)==null?void 0:t.getComputedStyle(e,null).height;return Number(i==null?void 0:i.replace("px",""))}}getRect(e){var i;const t=(i=document.defaultView)==null?void 0:i.getComputedStyle(e,null);return t!=null?{width:Number(t.width.replace("px","")),height:Number(t.height.replace("px",""))}:{}}getDataNumber(e){const t=this.getEl().getAttribute(e);return t==null?0:Number(t)}getOffsetTop(e){const t=e.getBoundingClientRect();var i=window.pageYOffset||document.documentElement.scrollTop;return t.top+i}getOffset(e){const t=e.getBoundingClientRect();var i=window.pageYOffset||document.documentElement.scrollTop;return{y:t.top+i,x:t.left}}_call(e,t=null){e!=null&&(t!=null?e(t):e())}}const b=class{constructor(){n(this,"cnt",0);n(this,"_updateList",[]);n(this,"play",!0);n(this,"_update",()=>{if(this.play){this.cnt++;for(var e of this._updateList)e!=null&&e();window.requestAnimationFrame(this._update)}});window.requestAnimationFrame(this._update)}static get instance(){return this._instance||(this._instance=new b),this._instance}add(e){this._updateList.push(e)}remove(e){const t=[];this._updateList.forEach(i=>{i!=e&&t.push(i)}),this._updateList=t}};let f=b;n(f,"_instance");class g{constructor(e=0,t=0,i=0,s=0){n(this,"x",0);n(this,"y",0);n(this,"width",0);n(this,"height",0);this.x=e,this.y=t,this.width=i,this.height=s}}const y=class{constructor(){n(this,"_list",[]);n(this,"_timer",null);n(this,"size",new g);n(this,"oldSize",new g);n(this,"_call",()=>{for(var e of this._list)e!=null&&e()});window.addEventListener("resize",()=>{this._eResize()},!1)}static get instance(){return this._instance||(this._instance=new y),this._instance}_eResize(){this._setStageSize(),this._timer===null&&(clearInterval(this._timer),this._timer=null),this._timer=setTimeout(()=>{this._call(),this.oldSize.width=this.size.width,this.oldSize.height=this.size.height},300)}_setStageSize(){this.size.width=window.innerWidth,this.size.height=window.innerHeight}add(e){this._list.push(e)}remove(e){const t=[];this._list.forEach(i=>{i!=e&&t.push(i)}),this._list=t}};let v=y;n(v,"_instance");class X{constructor(e=0,t=0){n(this,"x",0);n(this,"y",0);this.x=e,this.y=t}set(e=0,t=0){this.x=e,this.y=t}copy(e){this.x=e.x,this.y=e.y}}class j extends V{constructor(e={}){super(e);n(this,"_updateHandler");n(this,"_resizeHandler");n(this,"_c",0);n(this,"_isEnter",!1);n(this,"_isOneEnter",!1);n(this,"_observer");n(this,"_elPos",new X(0,9999));n(this,"_eRollOverHandler");n(this,"_eRollOutHandler");(e.isDefEvent==null||e.isDefEvent)&&(this._updateHandler=this._update.bind(this),f.instance.add(this._updateHandler),this._resizeHandler=this._resize.bind(this),v.instance.add(this._resizeHandler))}init(){super.init()}_setHover(){this._eRollOverHandler=this._eRollOver.bind(this),this._eRollOutHandler=this._eRollOut.bind(this),this.getEl().addEventListener("mouseenter",this._eRollOverHandler),this.getEl().addEventListener("mouseleave",this._eRollOutHandler)}_disposeHover(){this._eRollOverHandler!=null&&(this.getEl().removeEventListener("mouseenter",this._eRollOverHandler),this.getEl().removeEventListener("mouseleave",this._eRollOutHandler),this._eRollOverHandler=null,this._eRollOutHandler=null)}_eRollOver(){}_eRollOut(){}_setObserver(){this._observer=new IntersectionObserver(e=>{e!=null&&e.forEach(t=>{t!=null&&t.intersectionRatio>0?this._eEnter():this._eLeave()})},{root:null}),setTimeout(()=>{if(this._observer!=null&&this._observer!=null){const e=this.getEl();e!=null&&this._observer.observe(e)}},100)}_eEnter(){this._isEnter=!0}_eLeave(){this._isEnter=!1}_disposeObserver(){(this._observer!=null||this._observer!=null)&&(this._observer.unobserve(this.getEl()),this._observer=null)}dispose(){this._updateHandler!=null&&(f.instance.remove(this._updateHandler),this._updateHandler=null),this._resizeHandler!=null&&(v.instance.remove(this._resizeHandler),this._resizeHandler=null),this._disposeHover(),this._disposeObserver(),super.dispose()}css(e,t){const i=e.style;for(var s in t)i[s]=t[s]}_update(){this._c++}_resize(){}}class K extends j{constructor(e={}){super(e);n(this,"camera");n(this,"renderer");n(this,"mainScene");n(this,"isRender",!0);n(this,"renderSize",new g);let t={canvas:this.el,antialias:!1,preserveDrawingBuffer:!0,powerPreference:"low-power"};this.renderer=new M(t),this.renderer.autoClear=!0,this.renderer.setClearColor(16777215,1),this.mainScene=new H,this.camera=this._makeCamera(),this.updateCamera(this.camera,10,10)}init(){super.init()}_makeCamera(){return new R(1,1,1,1)}updateCamera(e,t=10,i=10){this._updateOrthCamera(e,t,i)}_updateOrthCamera(e,t=10,i=10){e.left=-t*.5,e.right=t*.5,e.top=i*.5,e.bottom=-i*.5,e.near=-1e4,e.far=1e5,e.updateProjectionMatrix(),e.position.set(0,0,0),e.lookAt(new E(0,0,0))}_update(){super._update()}_getUni(e){return e.material.uniforms}_setUni(e,t,i){const s=this._getUni(e);s[t].value=i}}class m{constructor(){}}n(m,"HIGH",0),n(m,"MIDDLE",1),n(m,"LOW",2);const C=class{constructor(){n(this,"fps",m.MIDDLE);n(this,"debug",document.querySelector(".l-debug"));n(this,"_dat");n(this,"_stats");n(this,"main",{bgColor:{value:15790320,type:"color"}});c.instance.FLG_PARAM&&this.makeParamGUI(),c.instance.FLG_STATS&&(this._stats=T(),document.body.appendChild(this._stats.domElement)),f.instance.add(()=>{this._update()})}_update(){this._stats!=null&&this._stats.update()}static get instance(){return this._instance||(this._instance=new C),this._instance}makeParamGUI(){this._dat==null&&(this._dat=new D,this._add(this.main,"main"))}_add(e,t){const i=this._dat.addFolder(t);for(var s in e){const r=e[s];r.use==null&&(r.type=="color"?i.addColor(r,"value").name(s):r.list!=null?i.add(r,"value",r.list).name(s):i.add(r,"value",r.min,r.max).name(s))}}};let p=C;n(p,"_instance");class Y extends K{constructor(e){super(e);n(this,"_con");n(this,"_mesh");n(this,"_val",0);n(this,"_color",[]);n(this,"_imgSize",256);n(this,"_sample",[]);n(this,"_oldAng",0);n(this,"_rotCnt",0);var t,i;for(let s=0;s<10;s++)this._color.push(new L(o.instance.random(0,1),o.instance.random(0,1),o.instance.random(0,1)));this._color[0]=new L(1-this._color[1].r,1-this._color[1].g,1-this._color[1].b),this._con=new G,this.mainScene.add(this._con),!c.instance.FLG_TEST&&window.DeviceOrientationEvent?(t=document.querySelector(".l-btn"))==null||t.addEventListener("click",()=>{window.DeviceOrientationEvent.requestPermission().then(s=>{var r;s=="granted"&&(window.addEventListener("deviceorientation",a=>{this._oldAng=this._val,this._val=Number(a.alpha),p.instance.debug.innerHTML="test "+this._val,this._oldAng-this._val>300&&this._rotCnt++},!0),(r=document.querySelector(".l-btn"))==null||r.classList.add("-none"))})}):(i=document.querySelector(".l-btn"))==null||i.classList.add("-none"),this._loadImg(),this._resize()}_loadImg(){const e=new Image;e.src=c.instance.PATH_IMG+"sample-0.png",e.onload=()=>{const t=document.createElement("canvas");t.width=t.height=this._imgSize;const i=t.getContext("2d");i.drawImage(e,0,0),e.style.display="none";const r=i.getImageData(0,0,t.width,t.height).data;for(let a=0;a<r.length;a+=4){const h=~~(a/4),A=~~(h%t.width),z=~~(h/t.width);r[a+3]>0&&this._sample.push(new E(A-this._imgSize*.5,(z-this._imgSize*.5)*-1,0))}console.log(this._sample.length),this._makeMesh()}}_makeMesh(){this._mesh=new F(this.getGeo(),new q({vertexShader:B,fragmentShader:U,transparent:!0,depthTest:!1,uniforms:{alpha:{value:0},color:{value:this._color[1]},size:{value:2},time:{value:0},ang:{value:0}}})),this._con.add(this._mesh)}_update(){if(super._update(),this._con.position.y=u.instance.screenOffsetY()*-1,c.instance.FLG_TEST&&(this._oldAng=this._val,this._val+=2,this._val=this._val%360,this._oldAng-this._val>300&&this._rotCnt++),this._mesh!=null){const e=u.instance.r(3);this._mesh.scale.set(e,e,1),this._setUni(this._mesh,"size",10);const t=this._val+this._rotCnt*360;this._setUni(this._mesh,"ang",o.instance.radian(t))}this.isNowRenderFrame()&&this._render()}_render(){const e=this._color[0];this.renderer.setClearColor(e,1),this.renderer.render(this.mainScene,this.camera)}isNowRenderFrame(){return this.isRender}_resize(e=!0){super._resize();const t=u.instance.sw(),i=u.instance.sh();if((c.instance.IS_SP||c.instance.IS_TAB)&&t==this.renderSize.width&&this.renderSize.height*2>i)return;this.renderSize.width=t,this.renderSize.height=i,this.updateCamera(this.camera,t,i);let s=window.devicePixelRatio||1;this.renderer.setPixelRatio(s),this.renderer.setSize(t,i),this.renderer.clear(),e&&this._render()}getGeo(){const e=this._sample.length,t=new N,i=new Float32Array(e*3),s=new Float32Array(e*3);let r=0,a=0;for(;a<e;){const h=this._sample[a];i[r*3+0]=h.x,i[r*3+1]=h.y,i[r*3+2]=0,s[r*3+0]=Math.sqrt(h.x*h.x+h.y*h.y),s[r*3+1]=0,s[r*3+2]=0,r++,a++}return t.setAttribute("position",new O(i,3)),t.setAttribute("info",new O(s,3)),t.computeBoundingSphere(),t}}new Y({el:document.querySelector("#js-con")});
